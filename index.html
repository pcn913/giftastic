<!DOCTYPE html>
<html>
<head>
	<title>giftastic</title>
	<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
</head>
<body>

		<div id="stuffbuttons"> </div>

		<form id="stuff-form">
			<label for="stuff-input">add stuff</label>
			<input type="text" id="stuff-input"><br>

			<input class="addStuff" type="submit" value="submit">
		</form>

		<div id="gifs-appear-here">

		</div>

</body>





  <script type="text/javascript">

$(document).ready(function() {
  	var topics = ['detroit tigers', 'chicago white sox', 'washington nationals'];

  	for(i = 0; i < topics.length; i++){

  		var b = $("<button>");
  		$(b).attr("button-data", topics[i]);
  		$(b).attr("class", "stuffbutton");
  		$(b).text(topics[i]);

        $("#stuffbuttons").append(b);
        $(b).after(" ");
  	}


	$(".addStuff").on("click", function() {
		event.preventDefault();
		var team = $("#stuff-input").val();
		if(team){
			var b = $("<button>");
	  		$(b).attr("button-data", team);
	  		$(b).attr("class", "stuffbutton");
	  		$(b).text(team);

	        $("#stuffbuttons").append(b);
	        $(b).after(" ");
		}

	});


  	$(".gifclick").on("click", function() {
      // STEP ONE: study the html above.
      // Look at all the data attributes.
      // Run the file in the browser. Look at the images.

      // After we complete steps 1 and 2 we'll be able to pause gifs from giphy.

      // STEP TWO: make a variable named state and then store the image's data-state into it.
      // Use the .attr() method for this.

      alert('here');

      // ============== FILL IN CODE HERE FOR STEP TWO =========================

      var state = $(this).attr("data-state");
      console.log(state);

      // =============================================

      // STEP THREE: Check if the variable state is equal to 'still',
      // then update the src attribute of this image to it's data-animate value,
      // and update the data-state attribute to 'animate'.
      if(state == 'still'){
         $(this).attr("src", $(this).attr("data-animate"));
         $(this).attr("data-state", 'animate');
      }else{

      // If state does not equal 'still', then update the src attribute of this
      // image to it's data-animate value and update the data-state attribute to 'still'
      // ============== FILL IN CODE HERE FOR STEP THREE =========================
         $(this).attr("src", $(this).attr("data-still"));
         $(this).attr("data-state", 'still');
      }

      // ==============================================

      // STEP FOUR: open the file in the browser and click on the images.
      // Then click again to pause.
    });



    $(".stuffbutton").on("click", function() {
      var searchterm = $(this).attr("button-data");
      console.log(searchterm);
      var queryURL = "http://api.giphy.com/v1/gifs/search?q=" +
        searchterm + "&api_key=dc6zaTOxFJmzC&limit=10";

      $.ajax({
          url: queryURL,
          method: "GET"
        })
        .done(function(response) {
          var results = response.data;
          console.log(results);
          $("#gifs-appear-here").empty();

          for (var i = 0; i < results.length; i++) {
            var gifDiv = $("<div class='item'>");

            var rating = results[i].rating;

            var p = $("<p>").text("Rating: " + rating);

            var stuffImage = $("<img>");
            stuffImage.attr("src", results[i].images.fixed_height_still.url);
            //stuffImage.attr("class", "gif");
            stuffImage.attr("data-animate", results[i].images.fixed_height.url);
            stuffImage.attr("data-still", results[i].images.fixed_height_still.url);
            stuffImage.attr("data-state", "still");



            gifDiv.prepend(p);
            gifDiv.prepend(stuffImage);

            $("img").addClass("gifclick");

            $("#gifs-appear-here").prepend(gifDiv);
          }
        });
    });



});


  </script>



</html>